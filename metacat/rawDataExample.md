# Raw data example

## A minimal example for raw data

To store data you need to provide at least minimal metadata.

Here is an annotated example of finding and listing the metadata for coldbox data using metacat.

## how do find example files:

```metacat query "files from dune:all where core.file_type=detector and core.run_type='hd-coldbox and core.'"```

here `dune:all` is a dataset that contains all of the info we found in the sam system.

## metadata from an example raw data files

the checksums and fid are generated by the system but you need to provide the rest.

```metacat file show -m default:np04_coldbox_run012270_0001_20211209T111918.hdf5 ```
```
{
    "checksums": {
        "adler32": "b457345a"
    },
    "created_timestamp": 1639049407.36323,
    "creator": "timm",
    "fid": "61688903",
    "name": "np04_coldbox_run012270_0001_20211209T111918.hdf5",
    "namespace": "default",
    "size": 3079531200,
    "metadata": {
        "core.data_stream": "test",
        "core.data_tier": "raw",
        "core.event_count": 81,
        "core.events": [
            113,
            114,
            ...
        ],
        "core.file_content_status": "good",
        "core.file_format": "hdf5",
        "core.file_type": "detector",
        "core.first_event_number": 113,
        "core.last_event_number": 193,
        "core.run_type": "hd-coldbox",
        "core.runs": [
            12270
        ],
        "core.runs_subruns": [
            1227000001
        ]
    }
}
```

First a list of the items all files need to have in order to be stored.

| item | description | comment |
|---------------------|------------------|--------------
| checksums | checksum for file | generated for you |
| created_timestamp | time file was created |
|creator           |	timm | userid of person who created it|
|fid          | file id #       | generated for you|
|name                | file name | must be unique within |namespace | 	metacat file namespace | |
|size                | File size in bytes | |
| metadata | more data about the file | see below|

Contents of the metadata part of metacat

metadata contents:

metacat also allows you to add additional information.

metadata have an X.Y structure. The major ones that used to be in sam are in core. 

|core.data_stream    | data stream  | [physics,test] |
| ----------| ----------- | --------- |
|    core.data_tier  |  data tier  | [raw,full-reconstructed ...] |
| core.event_count    | # of events in file | |
|    core.file_content_status |  good | |
|    core.file_format    | hdf5 | [hdf5, binary, root, artroot ...] |
|    core.file_type      | mc vs data | [mc, detector]  |
|    core.run_type       | run type| [protodune-sp, hd-coldbox ...] |
|    core.runs           | [list of runs]   |  |
|    core.runs_subruns   | [list of subruns] | in run*100000 + subrun format|
|    core.events      | list of event numbers | [optional list] |
|    core.first_event_number|  | optional|
|    core.last_event_number|   | optional |
